<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script> const pageVersion = 1 </script>
  <link rel="stylesheet" href="css/fontello-grain.css">
  <style>
      body {
          color: var(--tg-theme-text-color);
          background: var(--tg-theme-bg-color);
          display: flex;
          flex-direction: column;
          align-items: center;
          font-size: 18px;
      }

      .hint {
          color: var(--tg-theme-hint-color);
      }

      .link {
          color: var(--tg-theme-link-color);
      }

      .button {
          background: var(--tg-theme-button-color);
          color: var(--tg-theme-button-text-color);
          border: none;
          font-size: 18px;
      }

      .button:not(:last-child) {
          margin-bottom: 20px
      }

      #usercard {
          text-align: center;
      }
  </style>
</head>
<body>
</body>
<script>
  const tg = window.Telegram.WebApp;
  // fetch("http://192.168.0.190:8080/api/v1/grainnotes/my", {
  //   headers: {
  //     "X-WebAppData": tg.initData,
  //   },
  //   mode: "cors"
  // }).then((response) => {
  //   if (!response.ok) throw new Error(`Response status ${response.status}`)
  //   else return response.json()
  // }).then((result) => {
  //   result.forEach((item) => addNoteCard(item))
  // }).catch((error) => displayError(error))
  const stubData = [
    {
      id: 1,
      intStatus: 1,
      docNum: "R1CC39M0MB1F8CS",
      granary: "Элеватор; Емкость зернохранилища: 65 тыс. тонн; Акмолинская область, Бурабайский район, с.Кенесары, ул.Береке, 1Б",
      price: "764520,0",
      weight: "6648,0",
      crop: "Пшеница мягкая яровая (Triticum aestivum L)",
      productDetails: "Культура: Пшеница мягкая яровая (Triticum aestivum L); Зачтенный физический вес, кг: 6 648,00; Класс: 3 класс;\n" +
          "Год урожая: 2022; Категория: Продовольственное зерно; Сорт: Нет; Репродукция: Нет; Класс посевного стандарта: Нет;\n" +
          "Влажность, %: 14,00; Примесь сорная, %: 2,00; Примесь зерновая/масличная, %: 5,00; Зараженность: Не обнаружено;\n" +
          "Запах: Нормальный; Цвет: Обесцвеченный (3 степень); Тип: I; Натура: 800,00; Клейковина, %: 30,00;\n" +
          "Клейковина, усл.ед.: 82,00; Пленчатость, %: 0,00; Число падения, с: 200,00; Белок, %: 15,20; Стекловидность, %: 0,00;\n" +
          "Прочие показатели: .;"

    },

    {
      id: 2,
      intStatus: 1,
      docNum: "R1CC39M0MB1F8CS",
      granary: "Элеватор; Емкость зернохранилища: 65 тыс. тонн; Акмолинская область, Бурабайский район, с.Кенесары, ул.Береке, 1Б",
      price: "764520,0",
      weight: "6648,0",
      crop: "Пшеница мягкая яровая (Triticum aestivum L)",
      productDetails: "Культура: Пшеница мягкая яровая (Triticum aestivum L); Зачтенный физический вес, кг: 6 648,00; Класс: 3 класс;\n" +
          "Год урожая: 2022; Категория: Продовольственное зерно; Сорт: Нет; Репродукция: Нет; Класс посевного стандарта: Нет;\n" +
          "Влажность, %: 14,00; Примесь сорная, %: 2,00; Примесь зерновая/масличная, %: 5,00; Зараженность: Не обнаружено;\n" +
          "Запах: Нормальный; Цвет: Обесцвеченный (3 степень); Тип: I; Натура: 800,00; Клейковина, %: 30,00;\n" +
          "Клейковина, усл.ед.: 82,00; Пленчатость, %: 0,00; Число падения, с: 200,00; Белок, %: 15,20; Стекловидность, %: 0,00;\n" +
          "Прочие показатели: .;",
      attention: true
    },

    {
      id: 3,
      intStatus: 1,
      docNum: "R1CC39M0MB1F8CS",
      granary: "Элеватор; Емкость зернохранилища: 65 тыс. тонн; Акмолинская область, Бурабайский район, с.Кенесары, ул.Береке, 1Б",
      price: "764520,0",
      weight: "6648,0",
      crop: "Пшеница мягкая яровая (Triticum aestivum L)",
      productDetails: "Культура: Пшеница мягкая яровая (Triticum aestivum L); Зачтенный физический вес, кг: 6 648,00; Класс: 3 класс;\n" +
          "Год урожая: 2022; Категория: Продовольственное зерно; Сорт: Нет; Репродукция: Нет; Класс посевного стандарта: Нет;\n" +
          "Влажность, %: 14,00; Примесь сорная, %: 2,00; Примесь зерновая/масличная, %: 5,00; Зараженность: Не обнаружено;\n" +
          "Запах: Нормальный; Цвет: Обесцвеченный (3 степень); Тип: I; Натура: 800,00; Клейковина, %: 30,00;\n" +
          "Клейковина, усл.ед.: 82,00; Пленчатость, %: 0,00; Число падения, с: 200,00; Белок, %: 15,20; Стекловидность, %: 0,00;\n" +
          "Прочие показатели: .;"

    }

  ]

  stubData.forEach((item) => addNoteCard(item))

  function addNoteCard(item) {
    const noteCard = document.createElement("div")
    noteCard.innerHTML=`<div style="display: flex">
                          <span style="flex-grow: 1; font-weight: bold">${item.docNum}</span>
                          <span style="flex-shrink: 0;font-family: monospace; font-weight: bolder">${item.price} тг</span>
                        </div>
                        <div style="display: flex">
                          <span style="flex-grow: 1; font-size: smaller">${item.crop}</span>
                          <span style="flex-shrink: 0; font-size: smaller; font-family: monospace; font-weight: bolder">${item.weight} кг</span>
                        </div>
                        <div style ="font-size: small">${item.granary} кг</div>
                        <div style="display: flex">
                          <span style="flex-grow: 0"><i class="icon-menu"></i></span>
                          <span style="flex-grow: 1"><i class="icon-attention"></i></span>
                          <span><i class="icon-chat-empty"></i></span>
                          <span style="font-family: monospace"><i class="icon-star"></i>5</span>
                        </div>`

    document.body.appendChild(noteCard)
  }

  function displayError(error) {
    const errorLabel = document.createElement("p")
    errorLabel.classList.add("hint")
    errorLabel.textContent = `ver ${pageVersion}. ${error}`
    document.body.appendChild(errorLabel)
  }
</script>
</html>